<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8" />
    <title>Symbol Word Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
        }

        .box {
            border: 1px solid #ccc;
            display: inline-block;
            margin: 10px;
            padding: 10px;
            vertical-align: top;
            min-width: 200px;
            /* KutularÄ±n geniÅŸliÄŸini sabitlemek iÃ§in */
        }

        .symbols {
            font-size: 24px;
        }

        .option {
            cursor: pointer;
            margin: 5px;
            padding: 10px;
            display: inline-block;
            border: 2px solid transparent;
            border-radius: 8px;
            transition: all 0.2s;
        }

        .option:hover {
            border-color: blue;
            transform: scale(1.1);
        }

        .correct {
            border-color: green;
            background-color: #e6ffed;
        }

        .wrong {
            border-color: red;
            background-color: #ffeeee;
        }

        #options {
            margin-top: 30px;
        }
    </style>
</head>

<body>
    <span id="correctIndex" style="display:none;"></span>

    <h1>Simge EÅŸleÅŸtirme Oyunu</h1>

    <div id="question-area">
        <div class="box">
            <h3>SÃ–ZCÃœKLER</h3>
            <div id="words"></div>
        </div>

        <div class="box">
            <h3>SÄ°MGESEL EÅžLEÅžTÄ°RME</h3>
            <div id="mappings"></div>
        </div>

        <div class="box">
            <h3>Ä°STENEN SÃ–ZCÃœK</h3>
            <div id="targetWord" style="font-weight: bold; font-size: 1.2em;"></div>
        </div>
    </div>

    <div id="options" class="box">
        <h3>SEÃ‡ENEKLER</h3>
    </div>

    <script>
        // âœ¨ GÃœNCELLENDÄ°: Soru havuzundaki her dizi 4 kelime iÃ§erecek ÅŸekilde gÃ¼ncellendi.
        const questionPool = [
            ['KAPI', 'KEDÄ°', 'KAZA', 'PÄ°KA'], ['GÃœL', 'GÃ–L', 'GÃœNEÅž', 'GEZÄ°'], ['MUM', 'KUM', 'KAM', 'MAK'],
            ['MASA', 'SABA', 'ASMA', 'SANA'], ['TREN', 'RENK', 'KENT', 'KREM'], ['BABA', 'BANA', 'BARA', 'ABRA'],
            ['YEL', 'LEY', 'SEL', 'YELE'], ['KALP', 'PLAK', 'KAP', 'LAPA'], ['KART', 'TRAK', 'KRAL', 'TARK'],
            ['GEMÄ°', 'EMGÄ°', 'Ä°GEM', 'GÄ°ME'], ['KAZAK', 'AZMAK', 'ZAKAZ', 'KAZA'], ['BALIK', 'KABLI', 'AKIL', 'BAKI'],
            ['MARTI', 'TAMÄ°R', 'RÄ°TÄ°M', 'TIRNAK'], ['SÄ°NEK', 'KESÄ°N', 'EKSÄ°N', 'ESKÄ°'], ['ODA', 'ADO', 'DOA', 'AYO'],
            ['ELMA', 'LEMA', 'AMEL', 'ALEM'], ['KASA', 'SAKA', 'AKAS', 'ASAK'], ['ZÄ°L', 'LÄ°Z', 'Ä°ZL', 'ZÄ°F'],
            ['TEPE', 'PETE', 'TEKE', 'EGEP'], ['GÃ–Z', 'Ã–ZG', 'ZGÃ–', 'GEZ'], ['KUÅž', 'ÅžUT', 'TOK', 'KOÅž'],
            ['ATKI', 'KATI', 'ATIK', 'KITA'], ['KÄ°LÄ°T', 'LÄ°KÄ°T', 'TÄ°LKÄ°', 'KÄ°TL'], ['SABA', 'ASAB', 'BASA', 'ABAS'],
            ['LÄ°MON', 'ONLÄ°', 'MÄ°LO', 'LÄ°MAN']
        ];
        const symbols = ['âœ¨', 'ðŸ€', 'ðŸ’Ž', 'ðŸš€', 'ðŸŒ', 'ðŸŽ¨', 'ðŸ”¥', 'â­', 'â¤ï¸', 'ðŸ’¡'];

        function shuffleArray(arr) {
            return arr.slice().sort(() => Math.random() - 0.5);
        }

        function createMapping(words) {
            const letters = new Set(words.join('').toUpperCase().split(''));
            if (letters.size > symbols.length) return null;
            const shuffledSymbols = shuffleArray([...symbols]);
            const map = {};
            Array.from(letters).forEach((l, i) => {
                map[l] = shuffledSymbols[i];
            });
            return map;
        }

        function wordToSymbols(word, map) {
            return word.toUpperCase().split('').map(c => map[c]).join(' ');
        }

        function initGame() {
            document.getElementById('options').style.pointerEvents = 'auto';
            let attempts = 0;
            let validSet = null;
            let letterToSymbol = null;
            while (attempts < 100) {
                const wordSet = shuffleArray(questionPool)[0];
                const mapping = createMapping(wordSet);
                if (mapping) {
                    validSet = wordSet;
                    letterToSymbol = mapping;
                    break;
                }
                attempts++;
            }
            if (!validSet) {
                document.getElementById('words').textContent = 'Soru yÃ¼klenemedi';
                return;
            }

            const shuffledWordSet = shuffleArray(validSet);
            const target = shuffledWordSet[0]; // Hedef kelimeyi belirle

            // EÅŸleÅŸtirme iÃ§in gÃ¶sterilecek kelimeleri karÄ±ÅŸtÄ±r (hedef kelime dahil)
            const displayWords = shuffleArray(shuffledWordSet);
            document.getElementById('words').textContent = displayWords.join(', ');
            document.getElementById('targetWord').textContent = target;

            const mappingsDiv = document.getElementById('mappings');
            mappingsDiv.innerHTML = '';
            // EÅŸleÅŸtirmeleri karÄ±ÅŸtÄ±rarak gÃ¶ster
            shuffleArray(shuffledWordSet).forEach(word => {
                const p = document.createElement('p');
                p.textContent = `${word}  â†’  ${wordToSymbols(word, letterToSymbol)}`;
                mappingsDiv.appendChild(p);
            });

            const correctOption = wordToSymbols(target, letterToSymbol);

            // SeÃ§enekler, soru setindeki tÃ¼m kelimelerin simge karÅŸÄ±lÄ±klarÄ±dÄ±r
            const allSymbolOptions = validSet.map(w => wordToSymbols(w, letterToSymbol));
            const options = shuffleArray(allSymbolOptions); // SeÃ§enekleri karÄ±ÅŸtÄ±r

            const optionsDiv = document.getElementById('options');
            optionsDiv.innerHTML = '<h3>SEÃ‡ENEKLER</h3>';
            options.forEach(opt => {
                const div = document.createElement('div');
                div.className = 'option symbols';
                div.textContent = opt;
                div.addEventListener('click', () => {
                    document.querySelectorAll('.option').forEach(el => el.style.pointerEvents = 'none');
                    if (opt === correctOption) {
                        div.classList.add('correct');
                    } else {
                        div.classList.add('wrong');
                        document.querySelectorAll('.option').forEach(el => {
                            if (el.textContent === correctOption) {
                                el.classList.add('correct');
                            }
                        });
                    }
                    setTimeout(initGame, 2000);
                });
                optionsDiv.appendChild(div);
            });
        }
        initGame();
    </script>
</body>

</html>